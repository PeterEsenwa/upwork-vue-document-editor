(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["useDocument"]=t(require("vue")):e["useDocument"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(){"use strict";var t={15:function(t){t.exports=e}},r={};function o(e){var p=r[e];if(void 0!==p)return p.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,o),n.exports}!function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p=""}();var p={};return function(){if(o.r(p),o.d(p,{default:function(){return L}}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(o.p=t[1])}var r=o(15);Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const n="undefined"!==typeof window,c=(Object.prototype.toString,()=>+Date.now());function y(e,t){function r(...r){return new Promise(((o,p)=>{Promise.resolve(e((()=>t.apply(this,r)),{fn:t,thisArg:this,args:r})).then(o).catch(p)}))}return r}const O=e=>e();function b(e=O){const t=(0,r.ref)(!0);function o(){t.value=!1}function p(){t.value=!0}const n=(...r)=>{t.value&&e(...r)};return{isActive:(0,r.readonly)(t),pause:o,resume:p,eventFilter:n}}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var s=Object.defineProperty,i=Object.defineProperties,a=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&P(e,r,t[r]);if(j)for(var r of j(t))u.call(t,r)&&P(e,r,t[r]);return e},w=(e,t)=>i(e,a(t)),d=(e,t)=>{var r={};for(var o in e)l.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&j)for(var o of j(e))t.indexOf(o)<0&&u.call(e,o)&&(r[o]=e[o]);return r};function m(e,t,o={}){const p=o,{eventFilter:n=O}=p,c=d(p,["eventFilter"]),b=y(n,t);let s,i,a;if("sync"===c.flush){const t=(0,r.ref)(!1);i=()=>{},s=e=>{t.value=!0,e(),t.value=!1},a=(0,r.watch)(e,((...e)=>{t.value||b(...e)}),c)}else{const t=[],o=(0,r.ref)(0),p=(0,r.ref)(0);i=()=>{o.value=p.value},t.push((0,r.watch)(e,(()=>{p.value++}),w(f({},c),{flush:"sync"}))),s=e=>{const t=p.value;e(),o.value+=p.value-t},t.push((0,r.watch)(e,((...e)=>{const t=o.value>0&&o.value===p.value;o.value=0,p.value=0,t||b(...e)}),c)),a=()=>{t.forEach((e=>e()))}}return{stop:a,ignoreUpdates:s,ignorePrevAsyncUpdates:i}}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;n&&window,n&&window.document,n&&window.navigator,n&&window.location;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function g(e){return JSON.parse(JSON.stringify(e))}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self&&self;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function v(e){return e}function h(e,t){return e.value=t}function S(e){return e?"function"===typeof e?e:g:v}function E(e){return e?"function"===typeof e?e:g:v}function I(e,t={}){const{clone:o=!1,dump:p=S(o),parse:n=E(o),setSource:y=h}=t;function O(){return(0,r.markRaw)({snapshot:p(e.value),timestamp:c()})}const b=(0,r.ref)(O()),s=(0,r.ref)([]),i=(0,r.ref)([]),a=t=>{y(e,n(t.snapshot)),b.value=t},j=()=>{s.value.unshift(b.value),b.value=O(),t.capacity&&s.value.length>t.capacity&&s.value.splice(t.capacity,1/0),i.value.length&&i.value.splice(0,i.value.length)},l=()=>{s.value.splice(0,s.value.length),i.value.splice(0,i.value.length)},u=()=>{const e=s.value.shift();e&&(i.value.unshift(b.value),a(e))},P=()=>{const e=i.value.shift();e&&(s.value.unshift(b.value),a(e))},f=()=>{a(b.value)},w=(0,r.computed)((()=>[b.value,...s.value])),d=(0,r.computed)((()=>s.value.length>0)),m=(0,r.computed)((()=>i.value.length>0));return{source:e,undoStack:s,redoStack:i,last:b,history:w,canUndo:d,canRedo:m,clear:l,commit:j,reset:f,undo:u,redo:P}}var D=Object.defineProperty,x=Object.defineProperties,k=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R=(e,t)=>{for(var r in t||(t={}))F.call(t,r)&&A(e,r,t[r]);if(U)for(var r of U(t))T.call(t,r)&&A(e,r,t[r]);return e},q=(e,t)=>x(e,k(t));function J(e,t={}){const{deep:r=!1,flush:o="pre",eventFilter:p}=t,{eventFilter:n,pause:c,resume:y,isActive:O}=b(p),{ignoreUpdates:s,ignorePrevAsyncUpdates:i,stop:a}=m(e,f,{deep:r,flush:o,eventFilter:n});function j(e,t){i(),s((()=>{e.value=t}))}const l=I(e,q(R({},t),{clone:t.clone||r,setSource:j})),{clear:u,commit:P}=l;function f(){i(),P()}function w(e){y(),e&&f()}function d(e){let t=!1;const r=()=>t=!0;s((()=>{e(r)})),t||f()}function g(){a(),u()}return q(R({},l),{isTracking:O,pause:c,resume:w,commit:f,batch:d,dispose:g})}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var K=()=>{const e=(0,r.ref)([]),{canRedo:t,canUndo:o,undo:p,redo:n,pause:c}=J(e,{capacity:1e3,deep:!0}),y=e=>{e.ctrlKey&&"z"===e.key&&(e.preventDefault(),p()),e.ctrlKey&&"y"===e.key&&(e.preventDefault(),n())};return document.addEventListener("keydown",y),(0,r.onBeforeUnmount)((()=>{document.removeEventListener("keydown",y)})),{content:e,undo:p,redo:n,canRedo:t,canUndo:o,pauseStackTracking:c}},L=K}(),p}()}));
//# sourceMappingURL=useDocument.umd.min.js.map